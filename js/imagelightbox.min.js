!function(q,g,k,h){var d=function(){var a=k.body||k.documentElement;return a=a.style,""===a.WebkitTransition?"-webkit-":""===a.MozTransition?"-moz-":""===a.OTransition?"-o-":""===a.transition?"":!1},b=d()!==!1,m=function(c,s,o){var a={},f=d();a[f+"transform"]="translateX("+s+")",a[f+"transition"]=f+"transform "+o+"s linear",c.css(a)},p="ontouchstart" in g,l=g.navigator.pointerEnabled||g.navigator.msPointerEnabled,j=function(a){if(p){return !0}if(!l||"undefined"==typeof a||"undefined"==typeof a.pointerType){return !1}if("undefined"!=typeof a.MSPOINTER_TYPE_MOUSE){if(a.MSPOINTER_TYPE_MOUSE!==a.pointerType){return !0}}else{if("mouse"!==a.pointerType){return !0}}return !1};q.fn.imageLightbox=function(c){var F=q.extend({selector:'id="imagelightbox"',allowedTypes:"png|jpg|jpeg||gif",animationSpeed:250,preloadNext:!0,enableKeyboard:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0,onStart:!1,onEnd:!1,onLoadStart:!1,onLoadEnd:!1,previousTarget:function(){return this.previousTargetDefault()},previousTargetDefault:function(){var o=u.index(f)-1;if(0>o){if(F.quitOnEnd===!0){return B(),!1}o=u.length-1}f=u.eq(o)},nextTarget:function(){return this.nextTargetDefault()},nextTargetDefault:function(){var o=u.index(f)+1;if(o>=u.length){if(F.quitOnEnd===!0){return B(),!1}o=0}f=u.eq(o)}},c),u=q([]),f=q(),a=q(),t=0,r=0,C=0,e=!1,A=function(x){var s="a"===q(x).prop("tagName").toLowerCase()&&new RegExp(".("+F.allowedTypes+")$","i").test(q(x).attr("href")),v=q(x).attr("data-lightbox")!==h;return s||v},D=function(){if(!a.length){return !0}var v=0.8*q(g).width(),s=0.9*q(g).height(),x=new Image;x.src=a.attr("src"),x.onload=function(){if(t=x.width,r=x.height,t>v||r>s){var o=t/r>v/s?t/v:r/s;t/=o,r/=o}a.css({width:t+"px",height:r+"px",top:(q(g).height()-r)/2+"px",left:(q(g).width()-t)/2+"px"})}},z=function(s){if(e){return !1}if(s="undefined"==typeof s?!1:"left"===s?1:-1,a.length){var o={opacity:0};b?m(a,100*s-C+"px",F.animationSpeed/1000):o.left=parseInt(a.css("left"))+100*s+"px",a.animate(o,F.animationSpeed,function(){w()}),C=0}e=!0,F.onLoadStart!==!1&&F.onLoadStart(),setTimeout(function(){var y=f.attr("href");y===h&&(y=f.attr("data-lightbox")),a=q("<img "+F.selector+" />").attr("src",y).load(function(){a.appendTo("body"),D();var H={opacity:1};if(a.css("opacity",0),b){m(a,-100*s+"px",0),setTimeout(function(){m(a,"0px",F.animationSpeed/1000)},50)}else{var G=parseInt(a.css("left"));H.left=G+"px",a.css("left",G-100*s+"px")}if(a.animate(H,F.animationSpeed,function(){e=!1,F.onLoadEnd!==!1&&F.onLoadEnd()}),F.preloadNext){var I=u.eq(u.index(f)+1);I.length||(I=u.eq(0)),q("<img />").attr("src",I.attr("href")).load()}}).error(function(){F.onLoadEnd!==!1&&F.onLoadEnd()});var E=0,v=0,x=0;a.on(l?"pointerup MSPointerUp":"click",function(G){if(G.preventDefault(),F.quitOnImgClick){return B(),!1}if(j(G.originalEvent)){return !0}var H=(G.pageX||G.originalEvent.pageX)-G.target.offsetLeft;t/2>H?n():i()}).on("touchstart pointerdown MSPointerDown",function(G){return !j(G.originalEvent)||F.quitOnImgClick?!0:(b&&(x=parseInt(a.css("left"))),void (E=G.originalEvent.pageX||G.originalEvent.touches[0].pageX))}).on("touchmove pointermove MSPointerMove",function(G){return !j(G.originalEvent)||F.quitOnImgClick?!0:(G.preventDefault(),v=G.originalEvent.pageX||G.originalEvent.touches[0].pageX,C=E-v,void (b?m(a,-C+"px",0):a.css("left",x-C+"px")))}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(G){return !j(G.originalEvent)||F.quitOnImgClick?!0:void (Math.abs(C)>50?0>C?n():i():b?m(a,"0px",F.animationSpeed/1000):a.animate({left:x+"px"},F.animationSpeed/2))})},F.animationSpeed+100)},n=function(){F.previousTarget()!==!1&&z("left")},i=function(){F.nextTarget()!==!1&&z("right")},w=function(){return a.length?(a.remove(),void (a=q())):!1},B=function(){return a.length?void a.animate({opacity:0},F.animationSpeed,function(){w(),e=!1,F.onEnd!==!1&&F.onEnd()}):!1};return q(g).on("resize",D),F.quitOnDocClick&&q(k).on(p?"touchend":"click",function(o){a.length&&!q(o.target).is(a)&&(o.preventDefault(),B())}),F.enableKeyboard&&q(k).on("keyup",function(o){return a.length?(o.preventDefault(),27===o.keyCode&&F.quitOnEscKey===!0&&B(),void (37===o.keyCode?n():39===o.keyCode&&i())):!0}),this.startImageLightbox=function(o){return A(this)?(o!==h&&o.preventDefault(),e?!1:(e=!1,F.onStart!==!1&&F.onStart(),f=q(this),void z())):!0},q(k).off("click",this.selector),q(k).on("click",this.selector,this.startImageLightbox),this.each(function(){return A(this)?void (u=u.add(q(this))):!0}),this.switchImageLightbox=function(o){var v=u.eq(o);if(v.length){var s=u.index(f);f=v,z(s>o?"left":"right")}return this},this.loadPreviousImage=function(){n()},this.loadNextImage=function(){i()},this.quitImageLightbox=function(){return B(),this},this.addImageLightbox=function(o){return o.each(function(){return A(this)?void (u=u.add(q(this))):!0}),o.click(this.startImageLightbox),this},this}}(jQuery,window,document);;